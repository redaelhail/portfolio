<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Threading in Python | Reda El Hail</title><meta name=keywords content><meta name=description content="Threads is one of the most important concepts in programming.
What is a thread? TODO
Why use Threading? Source code: http://www.dabeaz.com/usenix2009/concurrent/
Thread synchronization 1. Shared data and race problem To respond to this question, let&rsquo;s launch two threads with no synchronization. The two threads called foo and bar are using the same variable x. One of them tries to increase the value with 1 and the other subtract 1
# A simple example of a race conditionimport threadingx = 0 # A shared valueCOUNT = 10000000def foo():global xfor i in range(COUNT):x += 1def bar():global xfor i in range(COUNT):x -= 1t1 = threading."><meta name=author content="Me"><link rel=canonical href=redaelhail.github.io/blog-website/blog/thread/><link crossorigin=anonymous href=/redaelhail.github.io/blog-website/assets/css/stylesheet.min.ec8da366ca2fb647537ccb7a8f6fa5b4e9cd3c7a0d3171dd2d3baad1e49c8bfc.css integrity="sha256-7I2jZsovtkdTfMt6j2+ltOnNPHoNMXHdLTuq0eSci/w=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/redaelhail.github.io/blog-website/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=redaelhail.github.io/blog-website/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=redaelhail.github.io/blog-website/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=redaelhail.github.io/blog-website/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=redaelhail.github.io/blog-website/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=redaelhail.github.io/blog-website/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Threading in Python"><meta property="og:description" content="Threads is one of the most important concepts in programming.
What is a thread? TODO
Why use Threading? Source code: http://www.dabeaz.com/usenix2009/concurrent/
Thread synchronization 1. Shared data and race problem To respond to this question, let&rsquo;s launch two threads with no synchronization. The two threads called foo and bar are using the same variable x. One of them tries to increase the value with 1 and the other subtract 1
# A simple example of a race conditionimport threadingx = 0 # A shared valueCOUNT = 10000000def foo():global xfor i in range(COUNT):x += 1def bar():global xfor i in range(COUNT):x -= 1t1 = threading."><meta property="og:type" content="article"><meta property="og:url" content="redaelhail.github.io/blog-website/blog/thread/"><meta property="og:image" content="https://avatars.githubusercontent.com/u/29822993?s=400&u=84cf5c59f9a2d42ed32ae0a1f523de81f418b53f&v=4"><meta property="article:section" content="blog"><meta property="og:site_name" content="Reda El Hail"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://avatars.githubusercontent.com/u/29822993?s=400&u=84cf5c59f9a2d42ed32ae0a1f523de81f418b53f&v=4"><meta name=twitter:title content="Threading in Python"><meta name=twitter:description content="Threads is one of the most important concepts in programming.
What is a thread? TODO
Why use Threading? Source code: http://www.dabeaz.com/usenix2009/concurrent/
Thread synchronization 1. Shared data and race problem To respond to this question, let&rsquo;s launch two threads with no synchronization. The two threads called foo and bar are using the same variable x. One of them tries to increase the value with 1 and the other subtract 1
# A simple example of a race conditionimport threadingx = 0 # A shared valueCOUNT = 10000000def foo():global xfor i in range(COUNT):x += 1def bar():global xfor i in range(COUNT):x -= 1t1 = threading."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blogs","item":"redaelhail.github.io/blog-website/blog/"},{"@type":"ListItem","position":3,"name":"Threading in Python","item":"redaelhail.github.io/blog-website/blog/thread/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Threading in Python","name":"Threading in Python","description":"Threads is one of the most important concepts in programming.\nWhat is a thread? TODO\nWhy use Threading? Source code: http://www.dabeaz.com/usenix2009/concurrent/\nThread synchronization 1. Shared data and race problem To respond to this question, let\u0026rsquo;s launch two threads with no synchronization. The two threads called foo and bar are using the same variable x. One of them tries to increase the value with 1 and the other subtract 1\n# A simple example of a race condition\rimport threading\rx = 0 # A shared value\rCOUNT = 10000000\rdef foo():\rglobal x\rfor i in range(COUNT):\rx += 1\rdef bar():\rglobal x\rfor i in range(COUNT):\rx -= 1\rt1 = threading.","keywords":[],"articleBody":"Threads is one of the most important concepts in programming.\nWhat is a thread? TODO\nWhy use Threading? Source code: http://www.dabeaz.com/usenix2009/concurrent/\nThread synchronization 1. Shared data and race problem To respond to this question, let’s launch two threads with no synchronization. The two threads called foo and bar are using the same variable x. One of them tries to increase the value with 1 and the other subtract 1\n# A simple example of a race condition\rimport threading\rx = 0 # A shared value\rCOUNT = 10000000\rdef foo():\rglobal x\rfor i in range(COUNT):\rx += 1\rdef bar():\rglobal x\rfor i in range(COUNT):\rx -= 1\rt1 = threading.Thread(target=foo)\rt2 = threading.Thread(target=bar)\rt1.start()\rt2.start()\rt1.join()\rt2.join()\rprint(x)\rOutput:\nPS \\projects\\threading\u003e python race.py\r991536\rAfter running this script, the two threads start running in “parallel”. Whoever arrives first to use the variable x will be able to increase it or decrease it. Normally, the value of the variable x should be equal to 0 after the two threads finish working. Unfortunately this is not the case. In fact, we get random corrupt values at each run. So what’s the problem here? It’s obviously accessing shared data.\nLet’s get back to the threads foo and bar and see what is happening at the interpreter level. Both functions have 4 stages of execution:\nLoad the global variable x Load the COUNT variable Addition (foo) or subtraction (bar) Writing the result in the global variable x What is going on?\nWhen one of the threads starts execution and loads both variables x and COUNT, it should normally start executing the steps 3 and 4, but the other thread may start execution at exactly that moment and loads the variables then makes changes on the global variable. The first thread resumes its execution without being aware of the changes on the global variable, it will work with the loaded value at first instead of working with the updated version of the global variable.\nWhen threads are not synchronized in accessing shared data, we are talking about a random race problem. To solve this problem there are several solutions:\nLocks RLocks Events Semaphores 2. Locks It is a lock that can be acquired or released by any thread. When a thread A acquires the lock with lock.acquire, no other thread can access the variables until the thread A finishes its execution and runs `lock.release\nimport threading\rx = 0 # A shared value\rx_lock = threading.Lock() # A lock for synchronizing access to x\rCOUNT = 1000000\rdef foo():\rglobal x\rfor i in range(COUNT):\rx_lock.acquire()\rx += 1\rx_lock.release()\rdef bar():\rglobal x\rfor i in range(COUNT):\rx_lock.acquire()\rx -= 1\rx_lock.release()\rt1 = threading.Thread(target=foo)\rt2 = threading.Thread(target=bar)\rt1.start()\rt2.start()\rt1.join()\rt2.join()\rprint (x)\rOutput:\nPS \\projects\\threading\u003e python lock.py\r0\r3. Rlocks Rlock is the abbreviation of re-entering lock. Which means a Lock that can be acquired many times. So the thread who owns the lock is the last one who was calling Rlock. and not yet unlocking.\nimport threading\rclass Foo(object):\rlock = threading.RLock()\rdef __init__(self):\rself.x = 0\rdef add(self,n):\rwith Foo.lock:\rprint(\"adder\")\rself.x += n\rdef incr(self):\rwith Foo.lock:\rprint(\"subber\")\rself.add(1)\rdef decr(self):\rwith Foo.lock:\rself.add(-1)\r# Two functions that will run in separate threads and call methods\r# on the above class.\rdef adder(f,count):\rwhile count \u003e 0:\rf.incr()\rcount -= 1\rdef subber(f,count):\rwhile count \u003e 0:\rf.decr()\rcount -= 1\r# Create some threads and make sure it works\rCOUNT = 10\rf = Foo()\rt1 = threading.Thread(target=adder,args=(f,COUNT))\rt2 = threading.Thread(target=subber,args=(f,COUNT))\rt1.start()\rt2.start()\rt1.join()\rt2.join()\rprint (f.x)\rimport threading\rclass Foo(object):\rlock = threading.RLock()\rdef __init__(self):\rself.x = 0\rdef add(self,n):\rwith Foo.lock:\rprint(\"adder\")\rself.x += n\rdef incr(self):\rwith Foo.lock:\rprint(\"subber\")\rself.add(1)\rdef decr(self):\rwith Foo.lock:\rself.add(-1)\r# Two functions that will run in separate threads and call methods\r# on the above class.\rdef adder(f,count):\rwhile count \u003e 0:\rf.incr()\rcount -= 1\rdef subber(f,count):\rwhile count \u003e 0:\rf.decr()\rcount -= 1\r# Create some threads and make sure it works\rCOUNT = 10\rf = Foo()\rt1 = threading.Thread(target=adder,args=(f,COUNT))\rt2 = threading.Thread(target=subber,args=(f,COUNT))\rt1.start()\rt2.start()\rt1.join()\rt2.join()\rprint (f.x)\rOutput:\nPS \\projects\\threading\u003e python rlock.py\r0\r4. Events from threading import *\rimport time\rdef traffic_police():\rwhile True:\rtime.sleep(5)\rprint(\"Traffic Police Giving GREEN Signal\")\revent.set()\rtime.sleep(10)\rprint(\"Traffic Police Giving RED Signal\")\revent.clear()\rdef driver():\rnum=0\rwhile True:\rprint(\"Drivers waiting for GREEN Signal\")\revent.wait()\rprint(\"Traffic Signal is GREEN...Vehicles can move\")\rwhile event.isSet():\rnum=num+1\rprint(\"Vehicle No:\", num,\" Crossing the Signal\")\rtime.sleep(2)\rprint(\"Traffic Signal is RED...Drivers have to wait\")\revent=Event()\rt1=Thread(target=traffic_police)\rt2=Thread(target=driver)\rt1.start()\rt2.start()\r5. Semaphores Queues Concept Inter Thread communication Example import threading\rimport time\rfrom queue import Queue\rdone = threading.Semaphore(0)\rq = Queue()\rdef producer(queue):\rprint (\"I'm the producer and I produce data.\")\rprint (\"Producer is going to sleep.\")\rtime.sleep(10)\ritem = \"Hello\"\rq.put(item)\rprint (\"Producer is alive. Signaling the consumer.\")\rdone.release()\rdef consumer(queue):\rprint (\"I'm a consumer and I wait for data.\")\rprint (\"Consumer is waiting.\")\rdone.acquire()\rprint (\"Consumer got\", queue.get())\rt1 = threading.Thread(target=producer, args=[q])\rt2 = threading.Thread(target=consumer, args=[q])\rt1.start()\rt2.start()\r","wordCount":"850","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"redaelhail.github.io/blog-website/blog/thread/"},"publisher":{"@type":"Organization","name":"Reda El Hail","logo":{"@type":"ImageObject","url":"redaelhail.github.io/blog-website/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=redaelhail.github.io/blog-website accesskey=h title="Reda El Hail (Alt + H)">Reda El Hail</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=redaelhail.github.io/blog-website/redaelhail.github.io/blog-website/about/ title=About><span>About</span></a></li><li><a href=redaelhail.github.io/blog-website/redaelhail.github.io/blog-website/blog/ title=Blog><span>Blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=redaelhail.github.io/blog-website>Home</a>&nbsp;»&nbsp;<a href=redaelhail.github.io/blog-website/blog/>Blogs</a></div><h1 class=post-title>Threading in Python</h1><div class=post-meta>4 min&nbsp;·&nbsp;850 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#what-is-a-thread>What is a thread?</a></li><li><a href=#why-use-threading>Why use Threading?</a></li><li><a href=#thread-synchronization>Thread synchronization</a><ul><li><a href=#1-shared-data-and-race-problem>1. Shared data and race problem</a></li><li><a href=#2-locks>2. Locks</a></li><li><a href=#3-rlocks>3. Rlocks</a></li><li><a href=#4-events>4. Events</a></li><li><a href=#5-semaphores>5. Semaphores</a></li></ul></li><li><a href=#queues>Queues</a><ul><li><a href=#concept>Concept</a></li><li><a href=#inter-thread-communication>Inter Thread communication</a></li><li><a href=#example>Example</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>Threads is one of the most important concepts in programming.</p><h2 id=what-is-a-thread>What is a thread?<a hidden class=anchor aria-hidden=true href=#what-is-a-thread>#</a></h2><p>TODO</p><h2 id=why-use-threading>Why use Threading?<a hidden class=anchor aria-hidden=true href=#why-use-threading>#</a></h2><p>Source code: <a href=http://www.dabeaz.com/usenix2009/concurrent/>http://www.dabeaz.com/usenix2009/concurrent/</a></p><h2 id=thread-synchronization>Thread synchronization<a hidden class=anchor aria-hidden=true href=#thread-synchronization>#</a></h2><h3 id=1-shared-data-and-race-problem>1. Shared data and race problem<a hidden class=anchor aria-hidden=true href=#1-shared-data-and-race-problem>#</a></h3><p>To respond to this question, let&rsquo;s launch two threads with no synchronization. The two threads called <code>foo</code> and <code>bar</code> are using the same variable <code>x</code>. One of them tries to increase the value with <code>1</code> and the other subtract <code>1</code></p><pre><code># A simple example of a race condition

import threading

x = 0     # A shared value

COUNT = 10000000
def foo():
    global x
    for i in range(COUNT):
        x += 1

def bar():
    global x
    for i in range(COUNT):
        x -= 1

t1 = threading.Thread(target=foo)
t2 = threading.Thread(target=bar)
t1.start()
t2.start()
t1.join()
t2.join()
print(x)
</code></pre><p><strong>Output</strong>:</p><pre><code>PS \projects\threading&gt; python race.py
991536
</code></pre><p>After running this script, the two threads start running in &ldquo;parallel&rdquo;. Whoever arrives first to use the variable <code>x</code> will be able to increase it or decrease it. Normally, the value of the variable <code>x</code> should be equal to <code>0</code> after the two threads finish working. Unfortunately this is not the case. In fact, we get random corrupt values at each run. So what&rsquo;s the problem here? It&rsquo;s obviously accessing shared data.</p><p>Let&rsquo;s get back to the threads <code>foo</code> and <code>bar</code> and see what is happening at the interpreter level. Both functions have 4 stages of execution:</p><blockquote><ol><li>Load the global variable <code>x</code></li><li>Load the <code>COUNT</code> variable</li><li>Addition (<code>foo</code>) or subtraction (<code>bar</code>)</li><li>Writing the result in the global variable <code>x</code></li></ol></blockquote><p><strong>What is going on?</strong></p><p>When one of the threads starts execution and loads both variables <code>x</code> and <code>COUNT</code>, it should normally start executing the steps 3 and 4, but the other thread may start execution at exactly that moment and loads the variables then makes changes on the global variable. The first thread resumes its execution without being aware of the changes on the global variable, it will work with the loaded value at first instead of working with the updated version of the global variable.</p><p>When threads are not synchronized in accessing shared data, we are talking about a random race problem. To solve this problem there are several solutions:</p><ol><li><code>Locks</code></li><li><code>RLocks</code></li><li><code>Events</code></li><li><code>Semaphores</code></li></ol><h3 id=2-locks>2. Locks<a hidden class=anchor aria-hidden=true href=#2-locks>#</a></h3><p>It is a lock that can be acquired or released by any thread. When a thread A acquires the lock with <code>lock.acquire</code>, no other thread can access the variables until the thread A finishes its execution and runs `lock.release</p><pre><code>import threading

x      = 0                   # A shared value
x_lock = threading.Lock()    # A lock for synchronizing access to x

COUNT = 1000000
def foo():
    global x
    for i in range(COUNT):
        x_lock.acquire()
        x += 1
        x_lock.release()

def bar():
    global x
    for i in range(COUNT):
        x_lock.acquire()
        x -= 1
        x_lock.release()

t1 = threading.Thread(target=foo)
t2 = threading.Thread(target=bar)
t1.start()
t2.start()
t1.join()
t2.join()
print (x)
</code></pre><p><strong>Output</strong>:</p><pre><code>PS \projects\threading&gt; python lock.py
0
</code></pre><h3 id=3-rlocks>3. Rlocks<a hidden class=anchor aria-hidden=true href=#3-rlocks>#</a></h3><p><code>Rlock</code> is the abbreviation of re-entering lock. Which means a Lock that can be acquired many times. So the thread who owns the lock is the last one who was calling Rlock. and not yet unlocking.</p><pre><code>import threading

class Foo(object):
    lock = threading.RLock()
    def __init__(self):
        self.x = 0
    def add(self,n):
        with Foo.lock:
            print(&quot;adder&quot;)
            self.x += n
    def incr(self):
        with Foo.lock:
            print(&quot;subber&quot;)
            self.add(1)
    def decr(self):
        with Foo.lock:
            self.add(-1)

# Two functions that will run in separate threads and call methods
# on the above class.

def adder(f,count):
    while count &gt; 0:
        f.incr()
        count -= 1

def subber(f,count):
    while count &gt; 0:
        f.decr()
        count -= 1

# Create some threads and make sure it works
COUNT = 10
f = Foo()
t1 = threading.Thread(target=adder,args=(f,COUNT))
t2 = threading.Thread(target=subber,args=(f,COUNT))
t1.start()
t2.start()
t1.join()
t2.join()
print (f.x)
import threading

class Foo(object):
    lock = threading.RLock()
    def __init__(self):
        self.x = 0
    def add(self,n):
        with Foo.lock:
            print(&quot;adder&quot;)
            self.x += n
    def incr(self):
        with Foo.lock:
            print(&quot;subber&quot;)
            self.add(1)
    def decr(self):
        with Foo.lock:
            self.add(-1)

# Two functions that will run in separate threads and call methods
# on the above class.

def adder(f,count):
    while count &gt; 0:
        f.incr()
        count -= 1

def subber(f,count):
    while count &gt; 0:
        f.decr()
        count -= 1

# Create some threads and make sure it works
COUNT = 10
f = Foo()
t1 = threading.Thread(target=adder,args=(f,COUNT))
t2 = threading.Thread(target=subber,args=(f,COUNT))
t1.start()
t2.start()
t1.join()
t2.join()
print (f.x)
</code></pre><p><strong>Output</strong>:</p><pre><code>PS \projects\threading&gt; python rlock.py
0
</code></pre><h3 id=4-events>4. Events<a hidden class=anchor aria-hidden=true href=#4-events>#</a></h3><pre><code>from threading import *
import time

def traffic_police():
while True:
    time.sleep(5)
    print(&quot;Traffic Police Giving GREEN Signal&quot;)
    event.set()
    time.sleep(10)
    print(&quot;Traffic Police Giving RED Signal&quot;)
    event.clear()

def driver():
num=0
while True:
    print(&quot;Drivers waiting for GREEN Signal&quot;)
    event.wait()
    print(&quot;Traffic Signal is GREEN...Vehicles can move&quot;)
    while event.isSet():
        num=num+1
        print(&quot;Vehicle No:&quot;, num,&quot; Crossing the Signal&quot;)
        time.sleep(2)
    print(&quot;Traffic Signal is RED...Drivers have to wait&quot;)

event=Event()
t1=Thread(target=traffic_police)
t2=Thread(target=driver)
t1.start()
t2.start()
</code></pre><h3 id=5-semaphores>5. Semaphores<a hidden class=anchor aria-hidden=true href=#5-semaphores>#</a></h3><h2 id=queues>Queues<a hidden class=anchor aria-hidden=true href=#queues>#</a></h2><h3 id=concept>Concept<a hidden class=anchor aria-hidden=true href=#concept>#</a></h3><h3 id=inter-thread-communication>Inter Thread communication<a hidden class=anchor aria-hidden=true href=#inter-thread-communication>#</a></h3><h3 id=example>Example<a hidden class=anchor aria-hidden=true href=#example>#</a></h3><pre><code>import threading
import time
from queue import Queue

done = threading.Semaphore(0)
q = Queue()

def producer(queue):
    
    print (&quot;I'm the producer and I produce data.&quot;)
    print (&quot;Producer is going to sleep.&quot;)
    time.sleep(10)
    item = &quot;Hello&quot;
    q.put(item)
    print (&quot;Producer is alive. Signaling the consumer.&quot;)
    done.release()

def consumer(queue):
    print (&quot;I'm a consumer and I wait for data.&quot;)
    print (&quot;Consumer is waiting.&quot;)
    done.acquire()
    print (&quot;Consumer got&quot;, queue.get())

t1 = threading.Thread(target=producer, args=[q])
t2 = threading.Thread(target=consumer, args=[q])
t1.start()
t2.start()
</code></pre></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=redaelhail.github.io/blog-website/blog/pyqt/><span class=title>« Prev</span><br><span>docker</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Threading in Python on twitter" href="https://twitter.com/intent/tweet/?text=Threading%20in%20Python&amp;url=redaelhail.github.io%2fblog-website%2fblog%2fthread%2f&amp;hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Threading in Python on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=redaelhail.github.io%2fblog-website%2fblog%2fthread%2f&amp;title=Threading%20in%20Python&amp;summary=Threading%20in%20Python&amp;source=redaelhail.github.io%2fblog-website%2fblog%2fthread%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Threading in Python on reddit" href="https://reddit.com/submit?url=redaelhail.github.io%2fblog-website%2fblog%2fthread%2f&title=Threading%20in%20Python"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Threading in Python on facebook" href="https://facebook.com/sharer/sharer.php?u=redaelhail.github.io%2fblog-website%2fblog%2fthread%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Threading in Python on whatsapp" href="https://api.whatsapp.com/send?text=Threading%20in%20Python%20-%20redaelhail.github.io%2fblog-website%2fblog%2fthread%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Threading in Python on telegram" href="https://telegram.me/share/url?text=Threading%20in%20Python&amp;url=redaelhail.github.io%2fblog-website%2fblog%2fthread%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2024 <a href=redaelhail.github.io/blog-website>Reda El Hail</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>